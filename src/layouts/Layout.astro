---
// Import the global CSS file
import '../styles/global.css';

import Navbar from '@components/Navbar.astro';
import Footer from '@components/Footer.astro';
import CarritoModal from '@components/CarritoModal.astro';
// Import the Tailwind CSS file that includes global styles
import '../styles/tailwind.css';

export interface Props {
  title: string;
  description?: string;
}

const {
  title,
  description = 'PrecioHogar - Tu tienda online de confianza para productos del hogar',
} = Astro.props;
---

<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <title>{title}</title>
    <link rel="stylesheet" href="/src/styles/tailwind.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <script src="/main.js" is:inline></script>
    <script src="/carrito-modal.js" is:inline></script>
    <script>
      // Initialize cart counter on all pages
      document.addEventListener('DOMContentLoaded', () => {
        const cart = JSON.parse(localStorage.getItem('carrito') || '[]');
        const counters = document.querySelectorAll('.cart-counter');
        counters.forEach((counter) => {
          const totalItems = cart.reduce((sum: number, item: { quantity?: number }) => sum + (item.quantity || 0), 0);
          counter.textContent = totalItems;
          counter.classList.toggle('hidden', totalItems === 0);
        });
      });
    </script>
  </head>
  <body class="font-sans text-gray-800 bg-white">
    <header class="sticky top-0 z-50 bg-white shadow-md">
      <Navbar />
    </header>

    <slot />

    <Footer />

    <!-- Modal del carrito -->
    <CarritoModal />

    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
  </body>
</html>
